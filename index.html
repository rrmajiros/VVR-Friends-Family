<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unofficial Villa Vie Odyssey: Friends & Family Rules</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e6eef5;
            color: #1a202c;
        }
        .infographic-container {
            background: linear-gradient(180deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 2rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            max-width: 7xl;
            margin-top: 2.5rem;
            margin-bottom: 2.5rem;
        }
        .section-icon {
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }
        .text-section {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
    </style>
</head>
<body class="p-8 md:p-12 lg:p-16 flex flex-col justify-between items-center min-h-screen">

    <div class="infographic-container w-full max-w-6xl p-8 md:p-12 lg:p-16">

        <header class="text-center mb-12 lg:mb-16">
            <h1 class="font-poppins text-4xl sm:text-5xl lg:text-6xl font-extrabold text-[#003366] mb-4 drop-shadow-lg">
                Unofficial Friends & Family Rules
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                A simple guide for residents and their guests to ensure a smooth voyage.
            </p>
        </header>

        <div class="space-y-16 lg:space-y-24">

            <!-- Tiered Pricing Timeline -->
            <section class="flex flex-col md:flex-row items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:mr-8 flex justify-center">
                    <svg class="w-24 h-24 text-[#0077B6] section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 8c-23.2 0-42 18.8-42 42s18.8 42 42 42 42-18.8 42-42S73.2 8 50 8zm0 76c-18.8 0-34-15.2-34-34s15.2-34 34-34 34 15.2 34 34-15.2 34-34 34z" fill="#D3EEFF"/>
                        <circle cx="50" cy="50" r="30" stroke="#0077B6" stroke-width="4"/>
                        <path d="M50 25c13.8 0 25 11.2 25 25S63.8 75 50 75 25 63.8 25 50 36.2 25 50 25z" fill="#0077B6"/>
                        <text x="50" y="55" font-size="25" text-anchor="middle" fill="white" font-weight="bold">F&F</text>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-left">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">Tiered Pricing Timeline</h2>
                    <p class="text-section text-gray-700 mb-4">
                        The new pricing structure for guests (effective 2026) replaces the flat free days with a tiered system.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center md:justify-start items-center space-y-4 sm:space-y-0 sm:space-x-8">
                        <div class="text-center">
                            <div class="font-bold text-lg text-[#10B981]">0-14 Days/Year</div>
                            <div class="text-sm text-gray-500">FREE!</div>
                        </div>
                        <div class="text-center">
                            <div class="font-bold text-lg text-yellow-600">Next 28 Days/Year</div>
                            <div class="text-sm text-gray-500">$33 per person/day</div>
                        </div>
                        <div class="text-center">
                            <div class="font-bold text-lg text-red-500">Any Days After</div>
                            <div class="text-sm text-gray-500">$99 per person/day</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Deck 2 or Pay More! -->
            <section class="flex flex-col md:flex-row-reverse items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:ml-8 flex justify-center">
                    <svg class="w-24 h-24 text-[#0077B6] section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 70 L90 70 Q95 75 90 80 L10 80 Q5 75 10 70Z" fill="#D3EEFF" stroke="#0077B6" stroke-width="2"/>
                        <path d="M20 60 L80 60 Q85 65 80 70 L20 70 Q15 65 20 60Z" fill="#D3EEFF" stroke="#0077B6" stroke-width="2"/>
                        <path d="M30 50 L70 50 Q75 55 70 60 L30 60 Q25 55 30 50Z" fill="#D3EEFF" stroke="#0077B6" stroke-width="2"/>
                        <text x="50" y="75" font-family="Poppins, sans-serif" font-size="20" font-weight="bold" fill="#0A2342" text-anchor="middle">2</text>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-right">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">Deck 2 or Pay More!</h2>
                    <p class="text-section text-gray-700">
                        F&F guests are primarily assigned to **Deck 2 Villas**. Other **Villas** cost significantly more, at the brochure rate minus 25%.
                    </p>
                </div>
            </section>

            <!-- Resident is Responsible & Must Be Here -->
            <section class="flex flex-col md:flex-row items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:mr-8 flex justify-center">
                    <svg class="w-24 h-24 text-[#10B981] section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 10c-11 0-20 9-20 20s9 20 20 20 20-9 20-20-9-20-20-20zM50 60c-16.6 0-30 13.4-30 30h60c0-16.6-13.4-30-30-30z" fill="#D3EEFF" stroke="#10B981" stroke-width="2"/>
                        <circle cx="50" cy="30" r="10" fill="#10B981"/>
                        <path d="M40 70c0-5.5 4.5-10 10-10s10 4.5 10 10" fill="#10B981"/>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-left">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">The Resident Must Be Onboard</h2>
                    <p class="text-section text-gray-700">
                        The resident must be physically onboard with their guests, and their account must be fully paid up with no overdue fees.
                    </p>
                </div>
            </section>
            
            <!-- The Forbidden Conversion -->
            <section class="flex flex-col md:flex-row-reverse items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:ml-8 flex justify-center">
                    <svg class="w-24 h-24 text-red-500 section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M25 50H75" stroke="#F87171" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M50 25V75" stroke="#F87171" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="50" cy="50" r="40" stroke="#EF4444" stroke-width="8"/>
                        <line x1="20" y1="20" x2="80" y2="80" stroke="#EF4444" stroke-width="8" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-right">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">No Ticket Swapping</h2>
                    <p class="text-section text-gray-700">
                        It is forbidden for a paying renter to switch to an F&F rate upon arrival. This is considered abuse of the policy.
                    </p>
                    <button id="summarize-ticket-swapping" class="mt-4 px-6 py-2 rounded-full font-bold text-sm text-white bg-blue-500 hover:bg-blue-600 transition-colors shadow-lg">
                        âœ¨ Explain this Rule
                    </button>
                    <div id="summary-ticket-swapping" class="mt-4 text-left text-gray-700 p-4 bg-gray-100 rounded-lg hidden"></div>
                </div>
            </section>

            <!-- No Double-Dipping! -->
            <section class="flex flex-col md:flex-row items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:mr-8 flex justify-center">
                    <svg class="w-24 h-24 text-blue-600 section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 10c-22.1 0-40 17.9-40 40s17.9 40 40 40 40-17.9 40-40S72.1 10 50 10zM50 20a30 30 0 0 1 0 60V20z" fill="#D3EEFF" stroke="#0077B6" stroke-width="2"/>
                        <path d="M50 20a30 30 0 0 1 0 60" stroke="#EF4444" stroke-width="2"/>
                        <path d="M50 20a30 30 0 0 1 0 60" fill="#EF4444"/>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-left">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">No Double-Dipping</h2>
                    <p class="text-section text-gray-700">
                        If a Villa owner rents out their own Villa, they cannot also be on the ship as an F&F guest. They must pay for a separate Villa.
                    </p>
                    <button id="summarize-double-dipping" class="mt-4 px-6 py-2 rounded-full font-bold text-sm text-white bg-blue-500 hover:bg-blue-600 transition-colors shadow-lg">
                        âœ¨ Explain this Rule
                    </button>
                    <div id="summary-double-dipping" class="mt-4 text-left text-gray-700 p-4 bg-gray-100 rounded-lg hidden"></div>
                </div>
            </section>

            <!-- Strict Penalties for Abuse -->
            <section class="flex flex-col md:flex-row-reverse items-center justify-center p-6 rounded-3xl bg-white shadow-xl">
                <div class="md:w-1/3 flex-shrink-0 mb-6 md:mb-0 md:ml-8 flex justify-center">
                    <svg class="w-24 h-24 text-gray-800 section-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 10C27.9 10 10 27.9 10 50s17.9 40 40 40 40-17.9 40-40S72.1 10 50 10zm-5 60L25 50l10-10 15 15 25-25 10 10-35 35z" fill="#D3EEFF" stroke="#000" stroke-width="2"/>
                        <path d="M50 10C27.9 10 10 27.9 10 50s17.9 40 40 40 40-17.9 40-40S72.1 10 50 10z" fill="white" stroke="#334155" stroke-width="2"/>
                        <path d="M50 25v-10m0 70v-10m25-25h-10m-30 0h-10" stroke="#334155" stroke-width="4" stroke-linecap="round"/>
                        <path d="M50 50L50 50L50 50" stroke="#EF4444" stroke-width="12" stroke-linecap="round"/>
                        <path d="M40 50L40 50L40 50M60 50L60 50L60 50" stroke="#EF4444" stroke-width="12" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="md:w-2/3 text-center md:text-right">
                    <h2 class="text-2xl lg:text-3xl font-bold font-poppins text-gray-800 mb-2">Strict Penalties for Abuse</h2>
                    <p class="text-section text-gray-700">
                        Breaking these rules will result in a **1-year suspension** of F&F privileges for both the guest and the resident.
                    </p>
                </div>
            </section>
        </div>
    </div>
    
    <footer class="text-center mt-8 text-sm text-gray-500 max-w-6xl">
        <p>These rules apply to everyone except Kevin Raupp ;)</p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // NOTE: The Gemini API key will be injected into this file by a GitHub Actions workflow.
            // Do not commit your key directly to the repository.
            const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY_HERE';
            const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=';
            const summarizeTicketSwappingBtn = document.getElementById('summarize-ticket-swapping');
            const summaryTicketSwappingDiv = document.getElementById('summary-ticket-swapping');
            const summarizeDoubleDippingBtn = document.getElementById('summarize-double-dipping');
            const summaryDoubleDippingDiv = document.getElementById('summary-double-dipping');

            async function getSummary(ruleText, summaryDiv) {
                summaryDiv.classList.remove('hidden');
                summaryDiv.innerHTML = '<p class="text-center animate-pulse">Generating summary...</p>';

                const systemPrompt = "You are a customer service representative for Villa Vie Odyssey. Your task is to explain the rules to a new guest in a friendly, easy-to-understand way. Do not use technical jargon.";
                const userQuery = `Explain the following policy in a conversational, simple paragraph: "${ruleText}"`;
                
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const fetchOptions = {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                };

                let retries = 0;
                const maxRetries = 3;
                let response;

                while (retries < maxRetries) {
                    try {
                        response = await fetch(API_URL + apiKey, fetchOptions);
                        if (response.ok) {
                            break;
                        }
                    } catch (error) {
                         // No need to log, just retry.
                    }
                    retries++;
                    await new Promise(res => setTimeout(res, Math.pow(2, retries) * 1000));
                }

                if (!response || !response.ok) {
                    summaryDiv.innerHTML = `<p class="text-red-500">Error: Unable to generate summary. Please try again.</p>`;
                    return;
                }

                const result = await response.json();
                const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    summaryDiv.innerHTML = `<p>${text}</p>`;
                } else {
                    summaryDiv.innerHTML = `<p class="text-red-500">Error: No summary was generated.</p>`;
                }
            }

            summarizeTicketSwappingBtn.addEventListener('click', () => {
                const ruleText = "It is forbidden to arrive as a paying renter and then try to switch to a F&F rate. This is considered abuse of the policy.";
                getSummary(ruleText, summaryTicketSwappingDiv);
            });

            summarizeDoubleDippingBtn.addEventListener('click', () => {
                const ruleText = "If an Owner rents their Villa out, they cannot also be on the ship as a F&F guest. They must pay for a separate Villa.";
                getSummary(ruleText, summaryDoubleDippingDiv);
            });
        });
    </script>
</body>
</html>
